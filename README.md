SolidusContent
==============

Introduction goes here.

Installation
------------

Add solidus_content to your Gemfile:

```ruby
gem 'solidus_content'
```

Bundle your dependencies and run the installation generator:

```shell
bundle
bundle exec rails g solidus_content:install
```

Configuration
-------------

Configure SolidusContent in an initializer:

```rb
# config/initializers/solidus_content.rb

SolidusContent.configure do |config|
  # your configuration goes here...
end
```

Registering a content provider
==============================

To register a content-provider, add a callable to the configuration under the 
name you prefer. Each content-provider will be called passing the 
`entry_options:` and `entry_type_options:`. 

As an example the `RawContent` content provider will return the entry options as
data.

```rb
class RawContent
  def initialize(entry_options:, entry_type_options:)
    def initialize(entry_options:, entry_type_options:)
      @entry_options = entry_options.with_indifferent_access
      @entry_type_options = entry_type_options.with_indifferent_access
    end

    def data
      @entry_options.with_indifferent_access
    end
  end
end

SolidusContent.config.content_providers[:raw] = ->(*args) {
  RawContent.new(*args)
}
```

_Content providers are wrapped in callables to avoid issues with Rails constant 
reloading._

Testing
-------

First bundle your dependencies, then run `rake`. `rake` will default to building the dummy app if it does not exist, then it will run specs, and [Rubocop](https://github.com/bbatsov/rubocop) static code analysis. The dummy app can be regenerated by using `rake test_app`.

```shell
bundle
bin/rake
```

When testing your application's integration with this extension you may use its factories.
Simply add this require statement to your spec_helper:

```ruby
require 'solidus_content/factories'
```

Releasing
---------

Your new extension version can be released using `gem-release` like this:

```shell
bundle exec gem bump -v VERSION --tag --push --remote upstream && gem release
```

Copyright (c) 2020 Nebulab, released under the New BSD License
